---
title: 2.MVPåŸå‹ç³»ç»Ÿï¼šå°†ç»„ä»¶å°è£…ä¸ºç»„ä»¶åº“
createTime: 2024/10/03 10:32:21
permalink: /widget/2/
---

æœ¬èŠ‚å°†ä»é›¶å®ç°ä¸€ä¸ªç»„ä»¶åº“ã€‚ä¸ºäº†å¸¦æ¥æ›´åŠ çœŸå®çš„å¼€å‘ä½“éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨æ•æ·æ–¹å¼ã€‚æ¯èŠ‚è¯¾è®²è¿°ä¸€ä¸ªä¸»é¢˜ï¼Œä½œä¸ºä¸€ä¸ª Sprint å†²åˆºè¿‡ç¨‹ã€‚ä»ä¸€ä¸ª MVP å¼€å§‹ï¼Œæ¯ä¸ªå†²åˆºéƒ½ä¼šç»™ç»„ä»¶æ·»åŠ ä¸€ç§ç‰¹æ€§ï¼Œæœ€ç»ˆæˆä¸ºä¸€ä¸ªå®Œæ•´çš„ç»„ä»¶åº“ã€‚

![](./FILES/87f6f334/99fa6d46.png)

## ç”¨æˆ·æ•…äº‹ (UserStory)

> é€šè¿‡ Vite å°†ä¸€ä¸ªç»„ä»¶å°è£…ä¸ºç»„ä»¶åº“ï¼Œç»„ä»¶åº“å¯ä»¥è¢«å…¶ä»– Vue é¡¹ç›®ä½œä¸ºæ’ä»¶ç›´æ¥è¿›è¡Œä½¿ç”¨ã€‚

æ ¸å¿ƒä»»åŠ¡æ˜¯å®Œæˆä¸€ä¸ªç»„ä»¶åº“çš„ MVPã€‚MVP (Minimum Viable Product) æ˜¯æœ€ç®€åŒ–å¯å®è¡Œäº§å“çš„æ„æ€ã€‚åœ¨ç»„ä»¶åº“ä¸­ï¼Œæœ€å°çš„ MVPï¼Œå¯ä»¥å®šä¹‰ä¸ºï¼š å°†ä¸€ä¸ªç»„ä»¶ä»¥ç»„ä»¶åº“çš„å½¢å¼å°è£…èµ·æ¥ã€‚

ç»„ä»¶åº“å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ª JS çš„åº“æ–‡ä»¶ï¼Œå¯ä»¥è¢« Vue é¡¹ç›®å¼•ç”¨å…¶å°è£…çš„ç»„ä»¶ã€‚

æ­å»ºè¿™æ ·ä¸€ä¸ªç¯å¢ƒï¼Œéœ€è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š

- å¦‚ä½•é…ç½®æ„å»ºå·¥å…·ï¼Ÿ
- å¦‚ä½•æ­å»ºä¸€ä¸ªè°ƒè¯•ç¯å¢ƒï¼Ÿ
- ç»„ä»¶ä»¥ä»€ä¹ˆæ ·çš„å½¢å¼å°è£…ï¼Ÿ
- å¦‚ä½•è®©ç»„ä»¶åº“æ”¯æŒä½¿ç”¨ JSXã€SFC å•æ–‡ä»¶ç»„ä»¶ç­‰è¯­æ³•ï¼Ÿ

## åŠŸèƒ½å®ç°

### node ç‰ˆæœ¬

![](./FILES/87f6f334/aa765112.png)

**pnpm è¯·è‡ªè¡Œå®‰è£…**

[å®‰è£… | pnpm](https://pnpm.io/zh/installation)

### Vite æ­å»ºå¼€å‘ç¯å¢ƒ

> æ­å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªå¼€å‘ç›®å½•å¹¶ä¸”åˆå§‹åŒ–è½¯ä»¶åŒ…ä¿¡æ¯(npm)

åˆ›å»ºç›®å½•ï¼š

```shell
mkdir ssy-ui-vite
cd ssy-ui-vite
```

åŒ…ç®¡ç†é€‰æ‹©ç›®å‰æ¯”è¾ƒæµè¡Œçš„ **pnpm** ã€‚é€‰æ‹© pnpm ï¼Œé¦–å…ˆæ˜¯ç”±äº pnpm ä¼˜ç§€çš„ç®¡ç†æœºåˆ¶ï¼Œä½¿å¾—å®‰è£…ä¾èµ–éå¸¸è¿…é€Ÿä¸”èŠ‚çœç©ºé—´ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œé¡¹ç›®åæœŸéœ€è¦å¼€å‘ç»„ä»¶åº“çš„å‘¨è¾¹ï¼Œæ¯”å¦‚ CLI å·¥å…·ç­‰ã€‚CLI å·¥å…·ä»¥å•ç‹¬è½¯ä»¶åŒ…çš„å½¢å¼å‘å¸ƒåœ¨ npm ä»“åº“ä¹‹ä¸­ï¼Œè¿™æ ·çš„è¯ï¼Œä¸€ä¸ª Repo å¤šä¸ªè½¯ä»¶åŒ…çš„é¡¹ç›®ç»“æ„éœ€è¦ä½¿ç”¨ monorepo é£æ ¼è¿›è¡Œç®¡ç†ã€‚pnpm æ‹¥æœ‰çš„ workspace åŠŸèƒ½å¯ä»¥å¾ˆå¥½åœ°å®Œæˆè¿™æ ·çš„å·¥ä½œã€‚

ä½¿ç”¨ pnpm åˆå§‹åŒ–é¡¹ç›®

```shell
pnpm init
```

![](./FILES/87f6f334/406bea8c.png)

åˆå§‹åŒ–å®Œæˆåï¼Œä¸‹ä¸€æ­¥å°±æ˜¯åˆ©ç”¨ Vite æ­å»ºä¸€ä¸ªç»„ä»¶åº“çš„è°ƒè¯•ç¯å¢ƒã€‚

å¦‚æœä½¿ç”¨ Vite æ­å»ºæ™®é€šé¡¹ç›®çš„è¯ï¼Œæ¨èä½¿ç”¨ Vite è„šæ‰‹æ¶å·¥å…·æ­å»ºã€‚è¿™æ ·å¯ä»¥å…å»å¤§é‡çš„å·¥ç¨‹åŒ–é…ç½®å·¥ä½œã€‚**ä½†æ˜¯ä½œä¸ºä¸€ä¸ªéœ€è¦é•¿æœŸç»´æŠ¤çš„ç»„ä»¶åº“ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„å·¥ç¨‹åŒ–æ­å»ºç»†èŠ‚éƒ½æŒæ§åœ¨è‡ªå·±çš„æ‰‹ä¸­ã€‚**

**æ‰€ä»¥è¿™æ¬¡ï¼Œå°±ä»é›¶å¼€å§‹è‡ªå·±æ­å»º Vite é¡¹ç›®ã€‚**

é¦–å…ˆå®‰è£… Viteã€‚

Vite ä½œä¸ºå¼€å‘è°ƒè¯•å·¥å…·ï¼Œåªä¼šåœ¨åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦åœ¨å®‰è£…æ—¶åŠ ä¸Š -D ã€‚

VSCode æ‰“å¼€ ssy-ui-vite æ–‡ä»¶å¤¹ï¼Œåœ¨æ ¹ç›®å½•æ‰§è¡Œï¼š

```shell
pnpm i vite -D
```

æ‰§è¡Œç»“æœï¼š

![](./FILES/87f6f334/9c511555.png)

æ¥ç€åœ¨è¿™ä¸ª`package.json`é‡Œæ·»åŠ å±æ€§ `"type": "module"`

ç„¶ååœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡µé¢ index.htmlï¼Œæµ‹è¯• Vite æ˜¯å¦å®‰è£…æ­£å¸¸ã€‚

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index</title>
  </head>
  <body>
    <h1>Hello SSY UI</h1>
  </body>
</html>
```

è¿è¡Œå‘½ä»¤ `npx vite`å¯åŠ¨ Viteã€‚

![](./FILES/87f6f334/ccd6bf1d.png)`npx`æ˜¯ä¸€ä¸ªä» npm5.2 åæ–°å¢åŠ çš„å‘½ä»¤ï¼Œç”¨äºæ‰§è¡Œè½¯ä»¶åŒ…ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ ä»¥å¾€çš„å¯æ‰§è¡Œæ–‡ä»¶åªèƒ½é€šè¿‡å…¨å±€å®‰è£…æˆ–è€…ä» node_modules/.bin ä¸­æŸ¥æ‰¾ï¼Œè¦ä¸ç„¶å¾ˆéš¾ç›´æ¥è¿è¡Œï¼Œè¿™ä¸ªå‡çº§ä½“éªŒéå¸¸èµ ğŸ‘ ã€‚

æ‰“å¼€ [http://localhost:5173/](http://localhost:5173/) å¦‚çœ‹åˆ°é¡µé¢å¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œè¯´æ˜ Vite å®‰è£…æ­£ç¡®ã€‚

![](./FILES/87f6f334/91240ce3.png)

ç„¶ååœ¨æ ¹ç›®å½•æ–°å»º src ç›®å½•ï¼Œsrc ä¸‹æ–°å»º index.ts æ–‡ä»¶ï¼Œç¼–å†™ Typescript ä»£ç å¦‚ä¸‹ï¼š

```typescript
const s: string = "hello TypeScript";
console.log(s);
```

åœ¨ index.html ä¸­æ·»åŠ å¼•ç”¨ï¼š

```html{10}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index</title>
  </head>
  <body>
    <h2>Hello SSY UI</h2>
    <script src="./src/index.ts" type="module"></script>
  </body>
</html>
```

æ­¤æ—¶ï¼Œè§‚å¯Ÿ http://localhost:5173/ æ§åˆ¶å°ï¼š

![](./FILES/87f6f334/32cae3dc.png)

å¯ä»¥çœ‹åˆ°è°ƒè¯•çª—å£ä¸­æ‰“å°çš„ã€ Hello Typescript ã€‘çš„æ—¥å¿—ï¼Œè¯´æ˜ Vite å·²ç»å¯ä»¥æ­£å¸¸è°ƒè¯• Typescript ä»£ç äº†ã€‚

è¿™å°±æ˜¯ Vite ä½“éªŒå¥½çš„åœ°æ–¹ï¼š**æ— éœ€ä»»ä½•é…ç½®å°±å¯ä»¥æä¾›ä¸€ä¸ª Typescript çš„å‰ç«¯å¼€å‘ç¯å¢ƒï¼Œæ”¯æŒè‡ªåŠ¨çƒ­æ›´æ–°**ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªå‰ç«¯ Typescript å…šï¼Œå¯ä»¥è€ƒè™‘æŠŠ Vite å®‰è£…åˆ°å…¨å±€ï¼Œè¿™æ ·å°±å¯ä»¥å…¨å±€ä½¿ç”¨ Typescript å¼€å‘å‰ç«¯äº†ã€‚

æœ€ååœ¨ package.json ä¸­çš„ scripts æ·»åŠ å¦‚ä¸‹å¯åŠ¨è„šæœ¬ï¼Œä¸‹æ¬¡å¯åŠ¨åªè¦è¿è¡Œ `pnpm dev` ï¼Œå°±å¯ä»¥å¯åŠ¨ Vite å¼€å‘ä»£ç äº†ã€‚

```json
"scripts": {
  "dev": "vite"
},
```

### å¼€å‘ä¸€ä¸ª Vue ç»„ä»¶

**åŸºç¡€ç»„ä»¶**

ä¸‹é¢å°è¯•åœ¨ Vite å¼€å‘ç¯å¢ƒå¼€å‘ Vue ç»„ä»¶ã€‚

é¦–å…ˆå®‰è£… Vue3

```bash
pnpm i vue
```

æ¥ç€å°è¯•ç¼–å†™ä¸€ä¸ªç®€å•çš„ Button ç»„ä»¶ã€‚

æ–°å»º src/button/index.ts æ–‡ä»¶ï¼š

```typescript
import { defineComponent, h } from "vue";
export default defineComponent({
  name: "SButton",
  render() {
    return h("button", null, "Sbutton");
  },
});
```

ç„¶åï¼Œåœ¨ src/index.ts ä¸­å¯åŠ¨ Vue å®ä¾‹ï¼š

```typescript
import { createApp } from "vue";
import SButton from "./button";
createApp(SButton).mount("#app");
```

è¿˜éœ€è¦åœ¨ index.html ä¸­æ·»åŠ ä¸€ä¸ªå®¹å™¨ï¼š

```html{10}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index</title>
  </head>
  <body>
    <h2>Hello SSY UI</h2>
    <div id="app"></div>
    <script src="./src/index.ts" type="module"></script>
  </body>
</html>
```

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ [http://localhost:5173/](http://localhost:5173/)ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæŒ‰é’®å·²ç»æ˜¾ç¤ºåˆ°æµè§ˆå™¨ä¸­äº†ã€‚

![](./FILES/87f6f334/b52c26fb.png)

**å•æ–‡ä»¶ç»„ä»¶**

å¯èƒ½ä½ ä¼šç–‘é—®ï¼š**ä¸ºä»€ä¹ˆæ˜¯ä½¿ç”¨ render å‡½æ•°ï¼Œè€Œä¸æ˜¯ç†Ÿæ‚‰çš„ template è¯­æ³•ç¼–å†™å‘¢ï¼Ÿ**

è¿™æ˜¯å› ä¸º **Vue3.0 é»˜è®¤çš„åŒ…æ˜¯ä¸æ”¯æŒæ¨¡æ¿ç¼–è¯‘åŠŸèƒ½çš„**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ template è¯­æ³•ç°åœ¨è¿˜ä¸èƒ½ç”¨ã€‚åœ¨ Vue3.0 ä¸­ï¼Œç¼–è¯‘åŠŸèƒ½æ¨èåœ¨æ„å»ºé˜¶æ®µå®Œæˆï¼Œè€Œä¸æ˜¯æ”¾åˆ°æµè§ˆå™¨ä¸­è¿è¡Œã€‚å¦‚æœå¸Œæœ›åœ¨æµè§ˆå™¨ä¸­çš„è¯ï¼Œå¯ä»¥é€‰æ‹© ./node_modules/vue/dist/vue.global.js è¿™ä¸ªåŒ…ã€‚

![](./FILES/87f6f334/0b4d72ee.png) å¦‚æœæƒ³è®© Vite å¯ä»¥ç¼–è¯‘ Vue æ¨¡ç‰ˆï¼Œå¯ä»¥é€šè¿‡å®‰è£… Vite çš„ Vue æ’ä»¶ã€‚

å¯ä»¥è¿™æ ·ç†è§£ï¼š Vite é»˜è®¤åªèƒ½æ”¯æŒ TS ä»£ç ï¼Œè€Œ Vue çš„æ¨¡æ¿éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µè½¬æ¢ä¸º Typescript ä»£ç  (æ¸²æŸ“å‡½æ•°)æ‰å¯ä»¥è¿è¡Œã€‚Vue æ’ä»¶ä¸ä½†æä¾›äº†æ¨¡æ¿çš„ç¼–è¯‘ï¼ŒåŒæ—¶è¿˜æ”¯æŒ Vue å•æ–‡ä»¶ (SFC) ç»„ä»¶çš„ç¼–è¯‘ã€‚

ä¸‹é¢ç”¨ä¸€å¼ å›¾æ¥è¯´æ˜ä¸€ä¸‹ã€‚

![](./FILES/87f6f334/12f06117.png)

- æä¾› Vue 3 å•æ–‡ä»¶ç»„ä»¶æ”¯æŒ
- [https://cn.vitejs.dev/guide/using-plugins.html](https://cn.vitejs.dev/guide/using-plugins.html)

é¦–å…ˆï¼Œå®‰è£… Vite çš„ Vue æ’ä»¶ï¼š

```bash
pnpm i @vitejs/plugin-vue -D
```

é¡¹ç›®æ ¹ç›®å½•æ–°å»º vite.config.ts

```typescript
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";

export default defineConfig({
  plugins: [vue()],
});
```

src æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª SFCButton.vue å•æ–‡ä»¶ç»„ä»¶ï¼Œä½¿ç”¨ template è¯­æ³•ã€‚

```vue
<template>
  <button>SFC Button</button>
</template>

<script lang="ts">
export default {
  name: "SFCButton",
};
</script>
```

åœ¨ index.ts ä¸­å¼•ç”¨æµ‹è¯•

```typescript
import { createApp } from "vue";
// import SButton from './button'
import SButton from "./SFCButton.vue";
createApp(SButton).mount("#app");
```

**é‡æ–°å¯åŠ¨é¡¹ç›®**ï¼Œè¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š

![](./FILES/87f6f334/7d54301c.png)

**JSX ç»„ä»¶**

**JSX æ˜¯ä¸€ç§ Javascript çš„è¯­æ³•æ‰©å±•**ï¼Œæœ€æ—©è¿ç”¨äº React æ¶æ„ä¸­ã€‚JSX ä¹Ÿå¯ä»¥å½“ä½œä¸€ç§æ¨¡æ¿è¯­è¨€ä½¿ç”¨ã€‚è™½ç„¶æœ‰äººä¼šè´¨ç–‘åˆ©ç”¨ JSX è¯­æ³•ç¼–å†™ Vue3 ä»£ç æ˜¯å¦åˆç†ï¼Œ æ¯”å¦‚ JSX è¯­æ³•æ˜¯å¦å…¼å®¹ Vue3 çš„é™æ€æå‡ç‰¹æ€§ã€‚ä½†æ˜¯ç°åœ¨å¾ˆå¤šåŸºäº Vue çš„ç»„ä»¶åº“éƒ½å¤§é‡ä½¿ç”¨ JSX è¯­æ³•ï¼Œå¯¹äºå·¥ç¨‹åŒ–æ­å»ºï¼Œè¿˜æ˜¯ä»¥å¼€å‘è€…çš„ä½¿ç”¨ä¹ æƒ¯ä¼˜å…ˆã€‚

æƒ³è¦æ”¯æŒ JSX è¯­æ³•ï¼Œéœ€è¦è½¬è¯‘å·¥å…·çš„æ”¯æŒï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ Babelã€‚

åœ¨ Vite é‡Œï¼Œå·²ç»æœ‰äº†å¯¹åº”çš„æ’ä»¶ï¼Œæä¾› Vue 3 JSX æ”¯æŒï¼ˆé€šè¿‡ [ä¸“ç”¨çš„ Babel è½¬æ¢æ’ä»¶](https://github.com/vuejs/babel-plugin-jsx)ï¼‰ã€‚

åªéœ€è¦å®‰è£…è¿™ä¸ªæ’ä»¶å°±å¯ä»¥äº†ã€‚

```bash
pnpm i @vitejs/plugin-vue-jsx -D
```

ä¿®æ”¹ vite.config.ts ï¼Œæ·»åŠ  JSX æ’ä»¶æ”¯æŒï¼š

```typescript
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";
import vueJsx from "@vitejs/plugin-vue-jsx";

export default defineConfig({
  plugins: [vue(), vueJsx()],
});
```

æ–°å»º src/TSXButton.tsx ç»„ä»¶ ( ä½¿ç”¨ TS è¯­è¨€ï¼Œæ‰€ä»¥æ˜¯ TSX)ã€‚

```tsx
import { defineComponent } from "vue";

export default defineComponent({
  name: "TSXButton",
  render() {
    return <button>TSX Button</button>;
  },
});
```

VSCode ç¼–è¾‘å™¨ä¸­ä¼šæç¤ºé”™è¯¯ï¼Œ**è¿™æ˜¯ä¸æ”¯æŒ JSX è¯­æ³•é€ æˆçš„ã€‚**

![](./FILES/87f6f334/db00e748.png)

åªéœ€è¦é…ç½®ä¸€ä¸‹ jsx è¯­æ³•æ”¯æŒå°±è¡Œäº†ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º tsconfig.json æ–‡ä»¶ï¼š

```json
{
  "compilerOptions": {
    "jsx": "preserve",
    "jsxImportSource": "vue",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    /* Linting */
    "strict": false,
    "noFallthroughCasesInSwitch": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    //
    "declaration": true /* ç”Ÿæˆç›¸å…³çš„ '.d.ts' æ–‡ä»¶ã€‚ */,
    "declarationDir": "./dist/types" /* '.d.ts' æ–‡ä»¶è¾“å‡ºç›®å½• */,
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true
  },
  "include": ["./**/*.*", "./shims-vue.d.ts"],
  "exclude": ["node_modules"]
}
```

é”™è¯¯å³å¯æ¶ˆå¤±ã€‚

![](./FILES/87f6f334/4da10b0d.png)

åœ¨ src/index.ts å¼•å…¥ TSXButton ç»„ä»¶ï¼š

```typescript
import { createApp } from "vue";
import TSXButton from "./TSXButton";
createApp(TSXButton).mount("#app");
```

è¿è¡Œæ•ˆæœï¼š

![](./FILES/87f6f334/c5ccda55.png)

### åº“æ–‡ä»¶å°è£…

ä¸ºäº†ææ¸…æ¥šå¦‚ä½•å°è£…ä¸€ä¸ªç»„ä»¶åº“ï¼Œæˆ‘ä»¬å…ˆç ”ç©¶ä¸€ä¸‹ Element ç»„ä»¶åº“æ˜¯æ€ä¹ˆåšçš„ã€‚

å‚è€ƒ Element çš„ä½¿ç”¨æŒ‡å—ï¼Œå¯ä»¥çœ‹åˆ°ç»„ä»¶åº“æœ‰ä¸¤ç§å¼•å…¥å½¢æ€ï¼š

- å®Œæ•´å¼•å…¥ ï¼šä¸€æ¬¡æ€§å¼•å…¥å…¨éƒ¨ç»„ä»¶ï¼Œä½¿ç”¨ Vue.use ä»¥ Vue æ’ä»¶çš„å½¢å¼å¼•å…¥ï¼›
- æŒ‰éœ€å¼•å…¥ ï¼šæŒ‰éœ€å¼•å…¥ï¼Œå¯¼å‡ºå•ä¸ªç»„ä»¶ï¼Œä½¿ç”¨ Vue.component æ³¨å†Œã€‚

æ‰€ä»¥ç»„ä»¶åº“çš„å½¢æ€åº”è¯¥æ»¡è¶³ä»¥ä¸‹çš„è¦æ±‚ï¼š

- é»˜è®¤å¯¼å‡ºä¸º Vue æ’ä»¶ï¼›
- æ¯ä¸ªç»„ä»¶å¯ä»¥å•ç‹¬å¯¼å‡ºã€‚

å½“ç„¶ï¼Œåˆ©ç”¨ Vite è¿˜æœ‰æ›´å¤æ‚çš„è‡ªåŠ¨æŒ‰éœ€åŠ è½½æ–¹æ¡ˆã€‚

æˆ‘ä»¬é¦–å…ˆè®¾è®¡ä¸€ä¸ªå…¥å£ï¼ŒåŒ…å«ä¸¤ä¸ªåŠŸèƒ½ï¼š

- å¯¼å‡ºå…¨éƒ¨ç»„ä»¶ï¼›
- å®ç°ä¸€ä¸ª Vue æ’ä»¶ï¼Œæ’ä»¶ä¸­ç¼–å†™ install æ–¹æ³•ï¼Œå°†æ‰€æœ‰ç»„ä»¶å®‰è£…åˆ° vue å®ä¾‹ä¸­ã€‚

æ–°å»º `src/entry.ts`

```typescript
import { App } from "vue";
import SButton from "./button";
import SFCButton from "./SFCButton.vue";
import TSXButton from "./TSXButton";

// å¯¼å‡ºå•ç‹¬ç»„ä»¶
export { SButton, SFCButton, TSXButton };

// ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Œå®ç°ä¸€ä¸ª install æ–¹æ³•
export default {
  install(app: App): void {
    app.component(SButton.name, SButton);
    app.component(SFCButton.name, SFCButton);
    app.component(TSXButton.name, TSXButton);
  },
};
```

é»˜è®¤ Vite å°±å¯ä»¥æ”¯æŒæ„å»ºï¼Œä½¿ç”¨ Vite çš„ build å‘½ä»¤å°±å¯ä»¥æ‰“åŒ…è¾“å‡ºã€‚å¦‚æœå¯¼å‡ºçš„æ˜¯ä¸€ä¸ªåº“æ–‡ä»¶çš„è¯ï¼Œè¿˜éœ€è¦é…ç½®ã€å¯¼å‡ºæ¨¡å—ç±»å‹ã€‘å¹¶ç¡®å®šå¯¼å‡ºçš„æ–‡ä»¶åã€‚

ä¿®æ”¹ `vite.config.ts` é…ç½®å¦‚ä¸‹:

```typescript
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";
import vueJsx from "@vitejs/plugin-vue-jsx";

const rollupOptions = {
  external: ["vue", "vue-router"],
  output: {
    globals: {
      vue: "Vue",
    },
  },
};

export default defineConfig({
  plugins: [vue(), vueJsx()],
  build: {
    rollupOptions,
    minify: false,
    // æ·»åŠ åº“æ¨¡å¼é…ç½®
    lib: {
      entry: "./src/entry.ts",
      name: "SSYUI",
      fileName: "ssy-ui",
      // å¯¼å‡ºæ¨¡å—æ ¼å¼
      formats: ["es", "umd", "iife"],
    },
  },
});
```

æ¥ç€åœ¨ package.json æ·»åŠ è¿è¡Œ `build` è„šæœ¬ï¼Œæ–¹ä¾¿æ„å»ºã€‚

```json
{
  "name": "ssy-ui-vite",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "dev": "vite",
    "build": "vite build"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.1.2",
    "@vitejs/plugin-vue-jsx": "^4.0.1",
    "vite": "^5.4.2"
  },
  "dependencies": {
    "vue": "^3.4.38"
  }
}
```

æ ¹ç›®å½•æ‰§è¡Œå‘½ä»¤

```bash
pnpm build
```

çœ‹åˆ°ç”Ÿæˆ dist ç›®å½•ç”Ÿæˆå°±è¯´æ˜æ­£å¸¸å¯¼å‡ºäº†ã€‚

![](./FILES/87f6f334/284d08f3.png)

æœ€åç¼–å†™ä¸€ä¸ªéªŒè¯é¡µé¢ï¼Œæµ‹è¯•ä¸€ä¸‹æ‰“åŒ…ç»“æœæ˜¯å¦æ­£ç¡®ã€‚

æ ¹ç›®å½•æ–°å»º demo/esm/index.htmlï¼Œæµ‹è¯•åŠ è½½å…¨éƒ¨ç»„ä»¶ï¼Œå¼•ç”¨æ„å»ºå¥½çš„çš„ ssy-ui.js æ–‡ä»¶ã€‚

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index</title>
  </head>
  <body>
    <h2>index</h2>
    <div id="app"></div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <script type="module">
      const { createApp } = Vue;
      import SSYUI, {
        SButton,
        SFCButton,
        TSXButton,
      } from "../../dist/ssy-ui.js";

      createApp({
        template: `
        <SButton/>
        <SFCButton/>
        <TSXButton/>
        `,
      })
        .component(SButton.name, SButton)
        .component(SFCButton.name, SFCButton)
        .component(TSXButton.name, TSXButton)
        .mount("#app");
    </script>
  </body>
</html>
```

å¯åŠ¨ vite

```bash
pnpm dev
```

è®¿é—®ï¼š [http://localhost:5173/demo/esm/index.html](https://link.juejin.cn/?target=http%3A%2F%2Flocalhost%3A5173%2Fdemo%2Fesm%2Findex.html)

![](./FILES/87f6f334/a3c171f3.png)

éªŒè¯ç»“æœè¯æ˜ MVP å·²ç»å®Œæˆã€‚

## å¤ç›˜

è¿™æ˜¯ç»„ä»¶åº“å¼€å‘çš„ç¬¬ä¸€å¤©ï¼Œæ—¨åœ¨æ­å»ºä¸€ä¸ªæœ€å°å¯ç”¨ç³»ç»Ÿï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨ Vite ç¼–å†™ç»„ä»¶åº“ã€‚

ç›®å‰ï¼Œè¿™ä¸ªå·¥ç¨‹å¯ä»¥å®ç°ç»„ä»¶åº“çš„ã€ç¼–å†™ã€‘ã€ã€è°ƒè¯•ã€‘ã€ã€å°è£…ã€‘çš„æ•´ä¸ªé—­ç¯ã€‚

ç•™ä¸€äº›æ€è€ƒé¢˜ï¼š

- å¦‚ä½•ä½¿ç”¨ Vite ä»é›¶æ­å»º Vue å¼€å‘ç¯å¢ƒ ï¼Ÿ
- å¦‚ä½•è®© Vite æ”¯æŒ SFC ä¸ JSX è¯­æ³• ï¼Ÿ
- ç»„ä»¶åº“çš„å°è£…å½¢æ€æ˜¯ä»€ä¹ˆæ ·å­ ï¼Ÿ
- å¦‚ä½•ä½¿ç”¨ Vite å®Œæˆåº“æ–‡ä»¶çš„æ„å»º ï¼Ÿ
